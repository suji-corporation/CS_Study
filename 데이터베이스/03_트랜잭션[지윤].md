## **트랜잭션(Transaction)**

-   데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위
-   한꺼번에 수행되어야할 일련의 연산
-   데이터베이스 일관성과 무경성 보장
    -   데이터베이스의 하나의 작업이 수행되는 동안 다른 작업이 간섭하지 못하도록 함
    -   논리적인 작업 셋을 모두 완벽하게 처리하거나 또는 처리하지 못할 경우에는 원 상태로 복구해서 작업의 일부만 적용되는 현상이 발생하지 않게 만들어주는 기능
</br>

### **트랜잭션의 연산**

-   **Commit**
    -   하나의 트랜잭션이 성공적으로 끝나서 데이터베이스가 일관성 있는 상태에 있음을 알려주기 위해 사용하는 연산
-   **Rollback**
    -   하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 보장하기 위해 이 트랜잭션이 행한 모든 연산을 취소(Undo)하는 연산

</br>

### **트랜잭션의 특징(ACID)**

-   **Atomicity(원자성)**
    -   트랜잭션이 데이터베이스에 모두 반영되거나, 전혀 반영 되지 않아야 함
    -   트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며(Commit), 모두가 완벽히 수행되지 않고 어느 하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야 함(Rollback)
-   **Consistency(일관성)**
    -   트랜잭션의 작업 처리 결과는 항상 일관성이 있어야 함
    -   시스템이 가지고 있는 고정요소(데이터 타입 등)는 트랜잭션 수행 전과 수행 완료 후의 상태가 같아야 함
-   **Isolation(독립성, 격리성)**
    -   트랜잭션 수행 시 다른 트랜잭션 연산이 끼어들지 못하도록 보장
    -   수행 중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조 할 수 없음
-   **Durability(지속성, 영속성)**
    -   트랜잭션이 성공적으로 완료되었을 경우, 결과는 영구적으로 반영되어야 함

</br>

### **트랜잭션의 상태**

![image](https://user-images.githubusercontent.com/64777557/226813828-10e5dcdb-c314-4960-abbf-b12f7993385e.png)

-   **활동(Active)**: 트랜잭션이 실행 중인 상태
-   **부분 완료(Partially Committed)**: 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
-   **완료(Committed)**: 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태
-   **실패(Failed)**: 트랜잭션 실행에 오류가 발생하여 중단된 상태
-   **철회(Aborted)**: 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태 (트랜잭션 취소)

</br>

> **💡 트랜잭션 사용 시 주의할 점**  
> 트랜잭션이 데이터베이스의 커넥션을 오래 점유하도록 하지 않기 위해 트랜잭션의 범위를 최소화하여 꼭 필요한 코드에만 적용하는 것이 좋다.

</br></br>

### **⭐️ 참고**

-   [https://cocoon1787.tistory.com/808](https://cocoon1787.tistory.com/808)
-   [https://code-lab1.tistory.com/51](https://code-lab1.tistory.com/51)
