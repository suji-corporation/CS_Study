## 내부 단편화 (Internal Fragmentation)
<img width="800" alt="image" src="https://user-images.githubusercontent.com/63537847/224611662-70e4884f-a6b6-469f-b809-7824775e103b.png">

- 주기억장치 내 사용자 영역이 실행 프로그램보다 커서 프로그램의 사용 공간을 할당 후 사용되지 않고 남게 되는 현상
- 작은 크기의 메모리 조각들이 발생하면, 전체적인 메모리 공간이 낭비될 수 있음

### 해결 방법 
1. 세그멘테이션(Segmentation) 
   - `세그먼트(Segment)` : 보조기억장치를 이용한 가상 메모리를 서로 다른 크기의 블록으로 나눈 것 
   - 각 세그먼트는 연속적인 공간에 저장됨 
   - 세그먼트들의 크기가 다르기 때문에 미리 분할해 둘 수 없고 메모리에 적재될 때 빈 공간을 찾아 할당하는 기법
   - mapping을 위해 segment table 필요
   - 프로세스가 필요한 메모리 만큼 할당해주기 때문에 내부 단편화 문제 해결 ⭕
   - 외부 단편화 해결 ❌ (중간에 프로세스가 메모리 해제하면 외부 단편화 발생)


</br>

## 외부 단편화 (External Fragmentation) 
![image](https://user-images.githubusercontent.com/63537847/224611841-dd274ebb-c918-4f45-b4f1-3790bd2220d1.png)

- 남아있는 총 메모리 공간이 요청한 메모리 공간보다 크지만, 남아있는 공간이 연속적(contiguous)이지 않아 발생하는 현상
- 남아있는 메모리 공간이 낭비되게 되는 문제가 발생 
- 작은 조각들이 발생하면, 전체적인 메모리 공간을 효율적으로 사용하지 못하게 되어 더 이상 할당할 메모리가 없는 상황(메모리 고갈)이 발생할 수 있음 

### 해결 방법 
1. 압축(Compaction) 
   - 주 기억장치 내 분산되어 있는 단편화된 공간들을 통합하여 하나의 커다란 빈 공간을 만드는 작업 
2. 통합(Coalescing)
   - 분산된 메모리 공간들을 **인접해 있는 것끼리** 통합시켜 합치는 기법 
   - 압축은 재배치 / 통합은 인접만 공간끼리 
3. 페이징(Paging) 
   - `페이지(Page)` : 보조기억장치를 이용한 가상 메모리를 같은 크기의 블록으로 나눈 것 
   - `프레임(Frame)` : 주 기억장치(RAM)를 페이지와 같은 크기로 나눈 것 
   - 사용하지 않는 프레임을 페이지에 옮기고(swap-out), 필요한 메모리를 페이지 단위로 프레임에 옮기는(swap-in) 기법
   - 페이지와 프레임을 대응시키기 위해 page mapping과정이 필요해서 paging table 사용 
   - 연속적이지 않은 공간도 활용할 수 있기 때문에 외부 단편화 문제를 해결 ⭕
   - 내부 단편화 해결 ❌ (페이지 단위에 알맞게 꽉채워 쓰는게 아니라서)
     - 페이지 단위를 작게하면 내부 단편화 문제도 해결할 수 있겠지만 대신 page mapping 과정이 많아지므로 오히려 효율이 떨어질 수 있음

</br> 

## 메모리 풀(Memory Pool) 
#### → 내부 단편화, 외부 단편화 해결 방법 
- 필요한 메모리 공간을 필요한 크기, 개수 만큼 사용자가 직접 지정하여 미리 할당받아 놓고 필요할 때마다 사용하고 반납하는 기법
- 미리 할당받아서 메모리 풀을 만들어 놓고 필요할 때마다 사용하고 반납하는 것 
- 외부 단편화 해결
  - 필요할 때마다 할당받았던 메모리 공간을 가져다 쓰고 반납하기 때문
- 내부 단편화 해결
  - 필요한 크기만큼 할당을 해놓기 때문
-  메모리 단편화로 인한 메모리 낭비량보다 메모리 풀을 만들었지만 쓰이지 않는 메모리의 양이 큰 경우에는 사용하지 않아야 함 
-  미리 할당해 놓고 사용하지 않는 순간에도 역시 메모리 누수가 일어나는 것이므로 잦은 동적할당과 해제가 일어날 경우에 사용하는 것이 바람직

</br>
</br>

> 참고                        
> https://code-lab1.tistory.com/54                   
> https://gguljaem.tistory.com/entry/%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%8B%A8%ED%8E%B8%ED%99%94Fragmentation%EC%97%90-%EB%8C%80%ED%95%9C-%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95#toc4                      
> https://junghyun100.github.io/%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%8B%A8%ED%8E%B8%ED%99%94/
