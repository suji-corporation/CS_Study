## **유저 모드(User-Mode)와 커널 모드(Kernel-Mode)**

-   커널에서는 중요한 자원을 관리하기 때문에 사용자가 해당 장원에 쉽게 접근하지 못하도록 보호하기 위해 나뉨
-   시스템에 중요한 영향을 미치는 연산은 커널 모드에서만 실행되도록 함으로써 하드웨어 보안 유지
-   프로세스가 실행되는 동안 유저 모드와 커널 모드를 반복적으로 넘나듬
-   유저 애플리케이션은 시스템 서비스를 호출할 때 유저 모드에서 커널 모드로 전환

![image](https://user-images.githubusercontent.com/64777557/220836439-efffa703-efed-4f5f-8c5f-fcdfd83d43a3.png)

#### **유저/사용자 모드**

-   사용자가 접근할 수 있는 영역을 제한적으로 두고 프로그램의 자원에 함부로 접근하지 못하도록 하는 모드
-   하드웨어 직접 접근 불가능
-   코드 작성, 프로세스 실행 명령 등 실행 가능
-   유저 애플리케이션 코드가 실행

#### **커널 모드**

-   모든 시스템 메모리 등 하드웨어에 직접 접근 가능
-   모든 CPU 명령 실행 가능
-   운영체제 코드나 디바이스 드라이버 같은 커널모드 코드가 실행

</br></br>

## **인터럽트(Interrupt)**

-   시스템에서 발생한 다양한 종류의 이벤트 or 그런 이벤트를 알리는 메커니즘
-   인터럽트 신호가 들어오면 CPU를 잠깐 정지, 즉각적으로 인터럽트를 처리하기 위해 커널 코드를 커널 모드에서 실행
-   키보드/마우스 등 IO 디바이스로 인한 인터럽트, 0으로 나누는 산술 연산에서의 인터럽트, 처리 시간이 다 되었을 때의 인터럽트, 프로세스 오류로 인한 인터럽트 등 발생
    -   하드웨어 인터럽트: IO 디바이스에서 발생하는 인터럽트
    -   소프트웨어 인터럽트(트랩): 0으로 나누는 산술 연산, 잘못된 메모리 공간 접근 등 프로세스 오류로 발생하는 인터럽트

#### **인터럽트 처리 과정**

![image](https://user-images.githubusercontent.com/64777557/220836480-4802f1f0-138e-49f6-89da-c50cc45844cf.png)

1.  인터럽트 요청
2.  프로세스 실행 중단 (실행 중이던 명령까지만 수행)
3.  PCB(Process Control Block)에 현재 프로세스 상태 저장, PC(Program Counter)에 다음 실행할 명령 주소 저장
4.  인터럽트 벡터를 읽고 인터럽트 처리 루틴 실행 (인터럽트 처리)
5.  처리 완료 시 저장했던 프로세스 상태 복구
6.  인터럽트 해제 및 중단된 프로세스 재개

</br></br>

## **시스템콜(System Call)**

![image](https://user-images.githubusercontent.com/64777557/220836510-55b0e0da-c2c5-4fb0-ab67-43aea302d92d.png)

-   운영체제가 커널에 접근하기 위한 인터페이스
-   프로그램이 OS커널이 제공하는 서비스를 이용하고 싶을 때 시스템콜 발생
-   유저 모드에서 커널 모드 영역의 기능을 사용할 수 있도록 커널 모드로 잠시 전환 (시스템콜을 기반으로 유저와 커널 분리)
-   프로세스/스레드 제어, 파일 조작, 장치 조작, 소켓, 통신 등과 관련한 시스템콜 발생

</br>

#### **파일 Read 예제**

![image](https://user-images.githubusercontent.com/64777557/220836534-c789ca1e-a058-49e9-86fd-8a1b6f59a89b.png)

</br></br>

### **⭐️ 참고**

-   [http://lapislazull.tistory.com/102](http://lapislazull.tistory.com/102)
-   [https://doh-an.tistory.com/31](https://doh-an.tistory.com/31)
-   [https://luckyyowu.tistory.com/133](https://luckyyowu.tistory.com/133)
